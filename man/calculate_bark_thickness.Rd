% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculations.R
\name{calculate_bark_thickness}
\alias{calculate_bark_thickness}
\title{Estimate Bark Thickness and Compute Bark & Wood Volumes}
\usage{
calculate_bark_thickness(
  x,
  equations,
  volume_type = "V22",
  total_volume_col = NULL,
  source = NULL
)
}
\arguments{
\item{x}{A \code{data.frame} of tree-level observations. Must include at least:
\itemize{
  \item \code{Species} (character)
  \item \code{D130} - diameter at breast height (numeric)
  \item a column with total stem volume (see \code{total_volume_col})
}}

\item{equations}{An internal data frame containing the parameters required for volume calculations.}

\item{volume_type}{Character; suffix for default total-volume column name. If
\code{total_volume_col} is \code{NULL}, uses \code{paste0(volume_type, " [m^3]")}
(default \code{"V22"}).}

\item{total_volume_col}{Optional character; name of the column containing total stem volume.
If \code{NULL}, constructed from \code{volume_type}.}

\item{source}{Optional character; restrict to equations from this source
(e.g., \code{"Dagnelie"}).}
}
\value{
The input \code{x} enriched with three new columns:
  \itemize{
    \item \code{Bark Volume [m^3]} - volume of bark
    \item \code{Wood Volume [m^3]} - net wood volume (total minus bark)
  }
}
\description{
Uses species-specific allometric equations (Y == "E") to estimate bark thickness or proportion,
then derives bark volume and net wood volume from a total stem volume.
}
\examples{
trees <- data.frame(
  Species = c("Hetre", "Chene pedoncule", "Epicea commun"),
  D130    = c(32, 40, 28),
  HTOT    = c(25, 30, 22),
  C130    = c(100.5, 125.7, 88.0),
  HDOM    = c(27, 31, 23)
)

# Compute total stem volume (V22)
res <- calculate_volume(trees, volume_type = "V22", equations)

# Simple expression evaluator (demo only)
evaluate_expression <- function(expr, vars) {
  if (expr \%in\% names(vars)) as.numeric(vars[[expr]]) else NA_real_
}

# Split total volume into bark and wood
result <- calculate_bark_thickness(res, equations, volume_type = "V22", source = "Dagnelie")
print(result)
}
\seealso{
\code{\link{calculate_volume}} for computing total stem volume from DBH.
}
