% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculations.R
\name{calculate_volume}
\alias{calculate_volume}
\title{Calculate Stem Volume from Allometric Equations}
\usage{
calculate_volume(
  x,
  volume_type = "V22",
  equations,
  equation_id = 1,
  D130 = "D130",
  GHA150 = "GHA150",
  GHA130 = "GHA130",
  specimens = NULL,
  source = "Dagnelie"
)
}
\arguments{
\item{x}{A data.frame containing tree-level observations. Must include at least:
\itemize{
  \item \code{Species} (character)
  \item a diameter column (default name \code{D130})
}}

\item{volume_type}{Character; type of volume to calculate. Supported values include:
\code{"V22"}, \code{"V22B"}, \code{"V22_HA"}, \code{"Merchantable"}, , \code{"Aboveground"}}

\item{equations}{An internal data frame containing the parameters required for volume calculations.}

\item{equation_id}{Integer; index of the equation to use for each species
(default is 1).}

\item{D130}{Name of the diameter-at-breast-height column (default = \code{"D130"}).}

\item{GHA150}{Name of the basal-area column at 150 cm (default = \code{"GHA150"}).}

\item{GHA130}{Name of the basal-area column at 130 cm (default = \code{"GHA130"}).}

\item{specimens}{Optional character vector of specimen identifiers, used to map
equations to individual observations.}

\item{source}{Optional character; source of the equations
(e.g., \code{"Dagnelie"}, \code{"Algan"}).}
}
\value{
The input \code{x} enriched with:
  \itemize{
    \item a new column \code{[volume_type] [m^3]},
    \item \code{Validity Status},
    \item one \code{Volume_<Variable>_Validity} column per predictive variable.
  }
}
\description{
Applies species-specific allometric equations to compute the stem volume
of individual trees.
}
\examples{
# =====================================================
# Example 1: Basic volume calculation for Beech and Oak
# =====================================================

# Input dataset with diameters and heights

trees <- data.frame(
  Species   = c("Hetre", "Chene pedoncule", "Epicea commun"),
  D130      = c(32, 40, 28),
  HTOT      = c(25, 30, 22),
  C130      = c(100.5, 125.7, 88.0),
  HDOM      = c(27, 31, 23)
  )

# Run calculation
res <- calculate_volume(trees, volume_type = "V22", equations)
res
# Suppose a species has multiple candidate equations

# Use the second equation for Beech
res2 <- calculate_volume(trees, volume_type = "V22", equation_id = 2, equations)
res2
}
\seealso{
\code{\link{calculate_bark_thickness}} for deriving bark and wood volumes
from total stem volume.
}
