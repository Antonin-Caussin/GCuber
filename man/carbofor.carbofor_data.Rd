% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/carbofor.R
\name{carbofor.carbofor_data}
\alias{carbofor.carbofor_data}
\title{Compute tree volume, bark thickness, biomass and carbon from a data.frame}
\usage{
\method{carbofor}{carbofor_data}(
  x,
  volume_type = "V22",
  equation_id = 1,
  carbon = FALSE,
  bark = FALSE,
  remove_na = FALSE,
  source = "Dagnelie",
  specimens = NULL,
  D130 = "D130",
  C130 = "C130",
  HTOT = "HTOT",
  HDOM = "HDOM",
  D150 = "D150",
  C150 = "C150",
  H = "H",
  biomass_method = "volume",
  ...
)
}
\arguments{
\item{x}{A `data.frame` of class `carbofor_data` containing individual tree measurements.
Must include at least species identification and diameter data.}

\item{volume_type}{Character. The type of volume to compute (e.g. , "V22" , "V22B" , "V22_HA"  )}

\item{equation_id}{Integer. Index of the equation to apply per species when multiple models are available.
Default is 1.}

\item{carbon}{Logical. If `TRUE`, biomass and carbon content are computed.}

\item{bark}{Logical. If `TRUE`, bark thickness and bark-adjusted volume are computed.}

\item{remove_na}{Logical. If `TRUE`, rows with missing computed volume are removed from the output.}

\item{source}{Character. Identifier of the source for the equations (e.g., "Dagnelie", "Vallet", "Bouvard").}

\item{specimens}{Character. Name of the column in `x` used to identify species (e.g., code, abbreviation, or full name).}

\item{D130}{Character. Column name for diameter at 130 cm height (default = "D130").}

\item{C130}{Character. Column name for circumference at 130 cm height (default = "C130").}

\item{HTOT}{Character. Column name for total tree height (default = "HTOT").}

\item{HDOM}{Character. Column name for dominant height (used for plot-level scaling).}

\item{D150}{Character. Column name for diameter at 150 cm height (default = "D150").}

\item{C150}{Character. Column name for circumference at 150 cm height (default = "C150").}

\item{H}{Character. Column name for the distance separating the felling cut level from a reference point.}

\item{biomass_method}{Character. Method used to compute biomass if `carbon = TRUE`.
Options are "volume" (volume × density) or "equation" (species-specific biomass model).}

\item{...}{Additional arguments passed to internal helper functions (not used directly here).}
}
\value{
A `data.frame` identical to `x` but enriched with additional columns depending on options:
\itemize{
  \item \code{<volume_type>} — Computed volume in m³ (e.g., `V22`, `V22B`, etc.)
  \item \code{Validity Status} — Indicates if the DHB falls within the validity domain of the equation.
  \item \code{Biomass Aboveground}, \code{Biomass Root}, \code{Biomass Total} — Biomass components [kg] (if `carbon = TRUE`).
  \item \code{Carbon} — Total carbon content in kilograms (if `carbon = TRUE`).
  \item \code{Relative_Width} — Relative width of the prediction interval, expressed as a percentage of the predicted volume.
  \item \code{Reliability} — Qualitative interpretation of the interval width (e.g., "High", "Medium", "Low").
}
}
\description{
This method calculates tree volume, bark thickness, aboveground biomass and associated
carbon stock from individual tree data using species-specific allometric equations.
It includes internal validation and preprocessing steps such as species mapping,
harmonization of diameter/circumference measurements, and height variable consistency.

The function supports several volume types and flexible configurations based on the
source and structure of allometric models stored internally.
}
\examples{
\dontrun{
# Example with European beech and Sessile oak
df <- data.frame(
  Species = c("Birch", "Silver fir"),
  D130 = c(32, 40),   # diameter at 1.30 m
  C130 = c(100, 126), # circumference at 1.30 m
  HTOT = c(25, 28),   # total height
  HDOM = c(27, 30)    # dominant height
)

result <- carbofor(
  x = df,
  volume_type = "V22",
  carbon = TRUE,
  bark = TRUE,
  specimens = "Species",
  biomass_method = "volume"
)

head(result)
}
}
\seealso{
\code{\link{calculate_volume}}, \code{\link{calculate_biomass}}, \code{\link{calculate_carbon}},
\code{\link{calculate_bark_thickness}}, \code{\link{validate_parameters}}, \code{\link{preprocess_data}}
}
